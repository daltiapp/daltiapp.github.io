<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Ultimate Upgrade Simulator</title>
    <style>
        body {
            background-color: #0a0a0a;
            color: white;
            font-family: 'Malgun Gothic', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            transition: background-color 0.3s;
        }

        /* ì „ì²´ ë°°ê²½ ë²ˆì©ì„ íš¨ê³¼ */
        .flash { background-color: #ffffff !important; }

        .item-card {
            background: rgba(30, 30, 30, 0.95);
            border: 2px solid #444;
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 0 50px rgba(0,0,0,0.9);
            width: 380px;
            position: relative;
        }

        #item-container {
            position: relative;
            height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        #item-image {
            font-size: 100px;
            z-index: 2;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #item-name {
            font-size: 30px;
            font-weight: bold;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(0,0,0,1);
        }

        .stats { 
            color: #00ffcc; 
            font-size: 18px;
            margin-bottom: 25px; 
            font-weight: bold;
            letter-spacing: 1px;
        }

        /* ê°•í™” ë²„íŠ¼ */
        .btn-main {
            background: linear-gradient(135deg, #b22222, #4b0000);
            color: white;
            border: 1px solid #ff4500;
            padding: 15px 40px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: 0.2s;
            display: inline-block;
        }

        .btn-main:hover { transform: scale(1.05); background: linear-gradient(135deg, #ff4500, #b22222); }
        .btn-main:disabled { filter: grayscale(1); cursor: not-allowed; opacity: 0.5; }

        /* ì¬ì‹œì‘ ë²„íŠ¼ (ì‹¤íŒ¨ ì‹œ ë“±ì¥) */
        #retry-btn {
            display: none;
            background: linear-gradient(135deg, #444, #111);
            color: #eee;
            border: 1px solid #888;
            padding: 15px 40px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            margin-top: -55px; /* ê°•í™” ë²„íŠ¼ ìœ„ì¹˜ ë³´ì • */
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            z-index: 20;
        }

        #log {
            margin-top: 30px;
            font-size: 16px;
            font-weight: bold;
            height: 24px;
            text-shadow: 1px 1px 2px black;
        }

        /* ì•„ìš°ë¼ íš¨ê³¼ */
        .aura {
            position: absolute;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0;
            transition: 0.5s;
            z-index: 1;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.4; }
            50% { transform: scale(1.6); opacity: 0.7; }
            100% { transform: scale(1); opacity: 0.4; }
        }
    </style>
</head>
<body>

    <div class="item-card">
        <div id="item-container">
            <div id="aura-effect" class="aura"></div>
            <div id="item-image">ğŸ—¡ï¸</div>
        </div>
        <div id="item-name">+0 ì§‘í–‰ê²€</div>
        <div class="stats">ì„±ê³µ í™•ë¥ : <span id="prob-display">100%</span></div>
        
        <button id="enhance-btn" class="btn-main" onclick="enhance()">ê°•í™”í•˜ê¸°</button>
        <button id="retry-btn" onclick="resetGame()">ìƒˆ ë¬´ê¸° ë°›ê¸°</button>

        <div id="log">ë¬´ê¸°ì— ê¸°ìš´ì´ ì„œë ¤ ìˆìŠµë‹ˆë‹¤.</div>
    </div>

    <script>
        let level = 0;
        const itemName = "ì§‘í–‰ê²€";
        const body = document.body;
        const log = document.getElementById('log');
        const nameDisplay = document.getElementById('item-name');
        const imgDisplay = document.getElementById('item-image');
        const probDisplay = document.getElementById('prob-display');
        const aura = document.getElementById('aura-effect');
        const enhanceBtn = document.getElementById('enhance-btn');
        const retryBtn = document.getElementById('retry-btn');

        function getProbability(lv) {
            if (lv < 6) return 100;
            if (lv < 10) return Math.max(5, 100 - (lv * 10));
            return Math.max(1, Math.floor(20 / (lv - 7))); 
        }

        function updateDisplay() {
            nameDisplay.innerText = `+${level} ${itemName}`;
            probDisplay.innerText = `${getProbability(level)}%`;
            
            let color = "#fff";
            if (level > 0 && level <= 6) color = "#fff";
            else if (level <= 8) color = "#00f2ff"; 
            else if (level <= 10) color = "#bc13fe";
            else if (level <= 15) color = "#ffea00"; 
            else color = "#ff0040"; 

            // ì´í™íŠ¸ ì ìš©
            imgDisplay.style.filter = `drop-shadow(0 0 ${15 + level * 5}px ${color})`;
            imgDisplay.style.color = color;
            imgDisplay.style.transform = `scale(${1 + (level * 0.08)})`;

            aura.style.opacity = level > 0 ? "0.8" : "0";
            aura.style.background = color;
            aura.style.animation = level > 6 ? "pulse 1s infinite" : "none";

            // ê³ ê°•í™” ì‹œ ë°°ê²½ ë³€í™”
            if (level >= 9) {
                body.style.backgroundColor = "#1a0000";
            } else {
                body.style.backgroundColor = "#0a0a0a";
            }
        }

        function enhance() {
            const chance = getProbability(level);
            const roll = Math.random() * 100;

            // í´ë¦­ í”¼ë“œë°±
            body.classList.add('flash');
            setTimeout(() => body.classList.remove('flash'), 40);

            if (roll < chance) {
                // ì„±ê³µ
                level++;
                log.innerText = `[SUCCESS] +${level} ê°•í™”ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤!`;
                log.style.color = "#00ffcc";
                updateDisplay();
            } else {
                // ì‹¤íŒ¨
                log.innerText = `[FAILED] ë¬´ê¸°ê°€ íŒŒê´´ë˜ì—ˆìŠµë‹ˆë‹¤...`;
                log.style.color = "#ff4500";
                
                // íŒŒê´´ ì—°ì¶œ
                imgDisplay.style.transform = "scale(0.5) rotate(90deg)";
                imgDisplay.style.opacity = "0";
                aura.style.opacity = "0";
                
                // ë²„íŠ¼ êµì²´
                enhanceBtn.style.display = "none";
                retryBtn.style.display = "block";
            }
        }

        function resetGame() {
            level = 0;
            imgDisplay.style.opacity = "1";
            imgDisplay.style.transform = "scale(1)";
            enhanceBtn.style.display = "inline-block";
            retryBtn.style.display = "none";
            log.innerText = "ìƒˆë¡œìš´ ë¬´ê¸°ë¥¼ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤.";
            log.style.color = "#ffd700";
            updateDisplay();
        }

        updateDisplay();
    </script>
</body>
</html>
